<template>
    <div id="container">
        <div v-for="(item, index) in list" :key="index" class="todo">
            <el-row>
                <el-col :span="2"></el-col>
                <el-col :span="12">
                    <div class="todo-item">
                        <div class="todo-index">{{ index + 1 }}</div>
                        <div class="todo-title" :class="{done:item.completed}">{{ item.title }}</div>
                    </div>
                </el-col>
                <el-col :span="3">
                    <el-button type="warning" v-if="item.completed" @click="redoItem(index)">重做</el-button>
                    <el-button type="success" v-else @click="checkItem(index)">完成</el-button>
                </el-col>
                <el-col :span="1"></el-col>
                <el-col :span="4">
                    <el-popconfirm title="确认删除待办项？" confirm-button-text="是" cancel-button-text="否"
                                   @confirm="deleteItem(index)">
                        <template #reference>
                            <el-button type="danger">删除</el-button>
                        </template>
                    </el-popconfirm>
                </el-col>
                <el-col :span="2"></el-col>
            </el-row>
        </div>
    </div>
</template>

<script>
import store from "@/store";
import {ElNotification} from "element-plus";

const todoList = store.state.todoList;
export default {
    name: 'navMain',
    data() {
        return {
            list: todoList,
        }
    },
    methods: {
        deleteItem: function (index) {
            ElNotification({
                title: "待办项已删除",
                type: "success"
            });
            todoList.pop(index);
            store.state.completedNum--;
        },
        checkItem: function (index) {
            ElNotification({
                title: "待办项已完成",
                type: "success"
            });
            todoList[index].completed = true;
            store.state.completedNum++;
        },
        redoItem: function (index) {
            ElNotification({
                title: "待办项已重做",
                type: "warning"
            });
            todoList[index].completed = false;
            store.state.completedNum--;
        }
    }
}
</script>

<style scoped>
#container {
    margin: 1rem 0;
}

.todo {
    padding: 1rem 0;
    text-align: left;
}

.todo-index {
    font-size: 2rem;
    display: inline;
}

.todo-title {
    /*border: 1px black solid;*/
    display: inline;
    margin-right: 1rem;
    margin-left: 0.5rem;
    padding-top: -1rem;
}

.done {
    text-decoration: line-through;
    color: darkgray;
}
</style>

